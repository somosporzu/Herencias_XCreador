<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creador de Herencias</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        function App() {
          const [name, setName] = useState('');
          const [nature, setNature] = useState('');
          const [desc, setDesc] = useState('');
          const [traits, setTraits] = useState([]);
          const [notif, setNotif] = useState(null);
          const [exp, setExp] = useState({});

          const data = {
            v: {
              mayor: [
                {n:'Aliento Elemental',c:3,d:'1/d√≠a, 1d6 da√±o elemental en cono 3m'},
                {n:'Brazos Adicionales',c:3,d:'Dos brazos extra. Sostienen objetos'},
                {n:'Coraz√≥n Secundario',c:3,d:'Primera vez a 0 Resistencia, quedan a 1'},
                {n:'Cuerpo Elemental',c:3,d:'Arma natural potente y Resistencia elemental'},
                {n:'Gl√°ndulas de Seda',c:3,d:'Crean cuerdas (10m/d√≠a) o redes'},
                {n:'Inmunidad a Enfermedades',c:3,d:'Inmunes a enfermedades no m√°gicas'},
                {n:'Mente Telep√°tica',c:3,d:'Comunicaci√≥n mental a 10m'},
                {n:'No Necesitan Dormir',c:3,d:'Solo 4h meditaci√≥n para descanso largo'},
                {n:'Piel Camale√≥nica',c:3,d:'Ventaja en sigilo para esconderse'},
                {n:'Piel de Piedra',c:3,d:'Ignoran 1 punto de da√±o de cualquier fuente'},
                {n:'Regeneraci√≥n Leve',c:3,d:'Recuperan 3 Resistencia al final de combate'},
                {n:'Regeneraci√≥n de Miembros',c:3,d:'Regeneran extremidades tras 1d6 d√≠as'},
                {n:'Sentido Ciego',c:3,d:'Ven sin ojos en 5m. Inmunes a ceguera'},
                {n:'Toque Paralizante',c:3,d:'1/d√≠a, ataque puede paralizar'},
                {n:'Toque Vamp√≠rico Menor',c:3,d:'1/d√≠a, recuperan Resistencia = mitad da√±o'},
                {n:'Visi√≥n Oscuridad Superior',c:3,d:'Ven en oscuridad total como de d√≠a con color'},
                {n:'Vuelo Limitado',c:3,d:'Planean o vuelan distancias cortas'}
              ],
              medio: [
                {n:'Acr√≥batas Natos',c:2,d:'Ventaja en acrobacias y equilibrio'},
                {n:'Adherencia Mural',c:2,d:'Trepan superficies verticales sin tiradas'},
                {n:'Afinidad con Fuerza',c:2,d:'Coste PX t√©cnicas de Fuerza se reduce 10%'},
                {n:'Afinidad Elemental Menor',c:2,d:'Realizan peque√±os trucos elementales'},
                {n:'Arma Natural Potente',c:2,d:'Garras/cuernos 1d6 da√±o'},
                {n:'Caparaz√≥n Dorsal',c:2,d:'Ataques por retaguardia no tienen ventaja'},
                {n:'Defensa Natural',c:2,d:'+1 estable a Defensa'},
                {n:'Ecolocalizaci√≥n',c:2,d:'Ven entorno en 10m con sonidos'},
                {n:'Empat√≠a Animal',c:2,d:'Comunicaci√≥n simple con animales'},
                {n:'Espinas Retr√°ctiles',c:2,d:'Quien los agarre sufre 1d6-2 da√±o'},
                {n:'Est√≥mago Carro√±ero',c:2,d:'Comen carne podrida sin enfermar'},
                {n:'Exoesqueletos',c:2,d:'+2 Defensa pero no usan armadura'},
                {n:'Feromonas',c:2,d:'Ventaja para persuadir o atraer'},
                {n:'Fotos√≠ntesis',c:2,d:'4h sol = no necesitan comer ese d√≠a'},
                {n:'Garras Retr√°ctiles',c:2,d:'Garras 1d6-3 que pueden ocultar'},
                {n:'Membranas Interdigitales',c:2,d:'Nadan a velocidad normal, ventaja agarres agua'},
                {n:'Memoria Prodigiosa',c:2,d:'Ventaja para recordar'},
                {n:'Metabolismo Eficiente',c:2,d:'Necesitan mitad comida y agua'},
                {n:'Miembros El√°sticos',c:2,d:'Estiran brazos al doble, m√°s alcance'},
                {n:'Movimiento Especial',c:2,d:'Velocidad trepar/nadar = terrestre'},
                {n:'Naturaleza Adicional',c:2,d:'Ganan Naturaleza extra'},
                {n:'Paso Ligero Avanzado',c:2,d:'Mueven sobre nieve/barro sin penalizaci√≥n'},
                {n:'Resistencia a Venenos',c:2,d:'Ventaja en salvaciones vs venenos'},
                {n:'Resistencia Aumentada',c:2,d:'+5 Resistencia m√°xima'},
                {n:'Resistencia M√°gica',c:2,d:'Ventaja en salvaciones vs T√©cnicas'},
                {n:'Saliva Corrosiva',c:2,d:'Escupen √°cido 1d6 corta distancia'},
                {n:'Sentidos Agudos',c:2,d:'Ventaja en un sentido (o√≠do/olfato)'},
                {n:'Visi√≥n en Oscuridad',c:2,d:'Ven oscuridad como penumbra (B&N)'}
              ],
              menor: [
                {n:'Armas Naturales D√©biles',c:1,d:'Garras/colmillos 1d6-3'},
                {n:'Bioluminiscencia',c:1,d:'Emiten luz tenue a voluntad'},
                {n:'Bolsas en Mejilla',c:1,d:'Guardan objetos peque√±os en boca'},
                {n:'Bono Habilidad Menor',c:1,d:'+1 a tirada espec√≠fica'},
                {n:'Colas Prensiles',c:1,d:'Cola sostiene objetos peque√±os'},
                {n:'Duros de Cabeza',c:1,d:'+1 resistir intimidaci√≥n'},
                {n:'Equilibrio Perfecto',c:1,d:'Ventaja evitar caerse'},
                {n:'Est√≥magos de Hierro',c:1,d:'Ventaja vs enfermedades comida'},
                {n:'Familiaridad Animal',c:1,d:'+1 interactuar tipo animal'},
                {n:'Fisiolog√≠a Anfibia',c:1,d:'Respiran aire y agua'},
                {n:'Manos H√°biles',c:1,d:'+1 artesan√≠a fina'},
                {n:'Orientaci√≥n Natural',c:1,d:'Ventaja no perderse'},
                {n:'P√°rpados Nictitantes',c:1,d:'Inmunes ceguera arena/polvo'},
                {n:'Pelo Aislante',c:1,d:'Ventaja vs fr√≠o extremo'},
                {n:'Percepci√≥n Aguda',c:1,d:'+1 notar detalles'},
                {n:'Piel Piedra Menor',c:1,d:'Ignoran 1 da√±o tipo espec√≠fico'},
                {n:'Pies Ligeros',c:1,d:'Ignoran terreno dif√≠cil vegetaci√≥n'},
                {n:'Pulmones Grandes',c:1,d:'Aguantan respiraci√≥n doble'},
                {n:'Resistencia al Dolor',c:1,d:'Ventaja soportar dolor'},
                {n:'Resistencia Clim√°tica',c:1,d:'Resisten mejor clima espec√≠fico'},
                {n:'Voz M√≠mica',c:1,d:'Imitan sonidos animales'},
                {n:'Voz Resonante',c:1,d:'Ventaja hacerse o√≠r distancia'}
              ]
            },
            d: {
              menor: [
                {n:'Alergia Com√∫n',c:-1,d:'Al√©rgico a algo com√∫n'},
                {n:'Condicionado',c:-1,d:'Ventaja solo funciona situaci√≥n espec√≠fica'},
                {n:'Curiosidad M√≥rbida',c:-1,d:'Tirada Aura ND9 no investigar peligro'},
                {n:'Dieta Especial',c:-1,d:'Cada 3 d√≠as comen tipo espec√≠fico'},
                {n:'Dientes Crecimiento',c:-1,d:'Deben roer objetos duros diario'},
                {n:'Fobia Com√∫n',c:-1,d:'Fobia algo com√∫n'},
                {n:'Huesos Fr√°giles',c:-1,d:'Doble da√±o ca√≠das'},
                {n:'Mala Memoria',c:-1,d:'Desventaja recordar'},
                {n:'Miedo Instintivo',c:-1,d:'Tirada Aura vs asustarse'},
                {n:'Muda de Piel',c:-1,d:'Vulnerable -1 Defensa un d√≠a'},
                {n:'Necesidad F√≠sica Leve',c:-1,d:'Requieren m√°s agua/comida/descanso'},
                {n:'Olor Distintivo',c:-1,d:'Desventaja sigilo vs olfato'},
                {n:'Piel Sensible',c:-1,d:'+1 da√±o Fuego o Hielo'},
                {n:'Sabor Agradable',c:-1,d:'Bestias los prefieren'},
                {n:'Sangre Fr√≠a',c:-1,d:'-1 en fr√≠o, no recuperan fatiga'},
                {n:'Sin Sentido Orientaci√≥n',c:-1,d:'Desventaja no perderse'},
                {n:'Sudoraci√≥n Excesiva',c:-1,d:'Desventaja agarres y social'},
                {n:'Sue√±o Profundo',c:-1,d:'Desventaja despertar'},
                {n:'Tics Nerviosos',c:-1,d:'Desventaja Sigilo quietos'},
                {n:'Torpeza Espec√≠fica',c:-1,d:'-1 habilidad espec√≠fica'},
                {n:'Voz D√©bil',c:-1,d:'Desventaja hacerse o√≠r'},
                {n:'Vulnerabilidad Clim√°tica',c:-1,d:'Fatiga r√°pida clima espec√≠fico'}
              ],
              medio: [
                {n:'Atributo Reducido',c:-2,d:'-1 permanente Atributo'},
                {n:'Conexi√≥n Emp√°tica',c:-2,d:'Sienten dolor criaturas cercanas'},
                {n:'Dieta Especializada',c:-2,d:'Solo comen comida muy espec√≠fica'},
                {n:'F√≠sico Inusual',c:-2,d:'Equipo cuesta x2 adaptar'},
                {n:'Fragilidad F√≠sica',c:-2,d:'+1 da√±o tipo espec√≠fico'},
                {n:'Limitaci√≥n Mental',c:-2,d:'No mienten/entienden met√°foras'},
                {n:'Maldici√≥n Menor',c:-2,d:'Desventaja √°rea espec√≠fica'},
                {n:'Metabolismo Exigente',c:-2,d:'Doble alimento y agua'},
                {n:'Piel Absorbente',c:-2,d:'Desventaja vs veneno'},
                {n:'Resistencia Reducida',c:-2,d:'-2 Resistencia m√°xima'},
                {n:'Respiraci√≥n Ruidosa',c:-2,d:'-2 Sigilo'},
                {n:'Rigidez Matutina',c:-2,d:'-2 Destreza primera hora'},
                {n:'Sangre Dulce',c:-2,d:'Enemigos los prefieren'},
                {n:'Sensible Luz Solar',c:-2,d:'Desventaja bajo luz solar'},
                {n:'Sensible Luz Lunar',c:-2,d:'Desventaja bajo luz lunar'},
                {n:'Sin Sentido Olfato',c:-2,d:'No perciben olores'},
                {n:'Sin Sombra',c:-2,d:'Genera desconfianza'},
                {n:'Visi√≥n Movimiento',c:-2,d:'Desventaja vs objetos inm√≥viles'}
              ],
              mayor: [
                {n:'Anatom√≠a R√≠gida',c:-3,d:'No doblan torso. Desventaja acrobacias'},
                {n:'Atrofia Brazos',c:-3,d:'-2 Fuerza y da√±o cuerpo a cuerpo'},
                {n:'Ceguera',c:-3,d:'No pueden ver'},
                {n:'Ceguera Diurna',c:-3,d:'Cegados luz brillante'},
                {n:'Debilidad Elemental Mayor',c:-3,d:'Doble da√±o elemental'},
                {n:'Defecto F√≠sico Serio',c:-3,d:'Desventaja mec√°nica permanente'},
                {n:'Dependencia Agua',c:-3,d:'Deben sumergirse 1h/d√≠a'},
                {n:'No Sanan Naturalmente',c:-3,d:'Solo sanan por T√©cnicas'},
                {n:'Nocturnos Obligados',c:-3,d:'Luz solar causa dolor'},
                {n:'Costumbre',c:-3,d:'Deben cumplir condici√≥n especial'},
                {n:'Piel Fotosensible',c:-3,d:'1 da√±o/turno bajo sol'},
                {n:'Sin Voz',c:-3,d:'No pueden hablar'},
                {n:'Sistema Inmune Nulo',c:-3,d:'Desventaja y doble da√±o veneno'},
                {n:'Vulnerable Material Com√∫n',c:-3,d:'Doble da√±o material com√∫n'}
              ]
            }
          };

          const add = (t) => setTraits([...traits, {...t, id: Date.now()}]);
          const del = (id) => setTraits(traits.filter(t => t.id !== id));
          const tot = traits.reduce((s,t) => s + t.c, 0);
          const hasDis = traits.some(t => t.c < 0);
          const valid = tot === 0 && traits.length >= 2 && traits.length <= 7 && hasDis && name && nature;

          const issues = [];
          if (tot !== 0) issues.push(`Balance: ${tot} PH`);
          if (traits.length < 2) issues.push('M√≠n 2 rasgos');
          if (traits.length > 7) issues.push('M√°x 7 rasgos');
          if (!hasDis) issues.push('Falta desventaja');
          if (!name) issues.push('Falta nombre');
          if (!nature) issues.push('Falta naturaleza');

          const expTxt = () => {
            let txt = '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            txt += `HERENCIA: ${name.toUpperCase()}\n`;
            txt += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            if (desc) txt += `${desc}\n\n`;
            txt += `NATURALEZA: ${nature}\n\nRASGOS:\n`;
            traits.forEach(t => txt += `‚óÜ ${t.n} (${t.c > 0 ? '+' : ''}${t.c} PH)\n  ${t.d}\n\n`);
            txt += `BALANCE: ${tot} PH | RASGOS: ${traits.length}\n`;
            
            const blob = new Blob([txt], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${name.replace(/\s+/g, '_')}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            setNotif('‚úÖ Texto descargado');
            setTimeout(() => setNotif(null), 2000);
          };

          const expImg = () => {
            const c = document.createElement('canvas');
            const ctx = c.getContext('2d');
            c.width = 800;
            c.height = 600 + traits.length * 80;
            
            ctx.fillStyle = '#fffbeb';
            ctx.fillRect(0, 0, c.width, c.height);
            ctx.strokeStyle = '#15803d';
            ctx.lineWidth = 8;
            ctx.strokeRect(20, 20, c.width - 40, c.height - 40);
            ctx.fillStyle = '#15803d';
            ctx.font = 'bold 48px serif';
            ctx.textAlign = 'center';
            ctx.fillText(name.toUpperCase(), c.width / 2, 90);
            
            let y = 160;
            ctx.fillStyle = '#fef3c7';
            ctx.fillRect(60, y, c.width - 120, 50);
            ctx.strokeStyle = '#15803d';
            ctx.lineWidth = 2;
            ctx.strokeRect(60, y, c.width - 120, 50);
            ctx.fillStyle = '#15803d';
            ctx.font = 'bold 24px serif';
            ctx.textAlign = 'left';
            ctx.fillText(`Naturaleza: ${nature}`, 80, y + 33);
            y += 80;
            
            ctx.fillStyle = '#15803d';
            ctx.font = 'bold 20px serif';
            ctx.fillText('RASGOS', 60, y);
            y += 35;
            
            traits.forEach(t => {
              ctx.fillStyle = t.c > 0 ? '#f0fdf4' : '#fee2e2';
              ctx.fillRect(60, y, c.width - 120, 70);
              ctx.strokeStyle = t.c > 0 ? '#15803d' : '#dc2626';
              ctx.lineWidth = 3;
              ctx.strokeRect(60, y, c.width - 120, 70);
              ctx.fillStyle = t.c > 0 ? '#15803d' : '#dc2626';
              ctx.font = 'bold 18px sans-serif';
              ctx.fillText(`${t.n} (${t.c > 0 ? '+' : ''}${t.c} PH)`, 80, y + 25);
              ctx.fillStyle = '#166534';
              ctx.font = '14px sans-serif';
              ctx.fillText(t.d, 80, y + 50);
              y += 80;
            });
            
            y += 20;
            ctx.fillStyle = tot === 0 ? '#15803d' : '#dc2626';
            ctx.font = 'bold 28px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(`Balance: ${tot} PH`, c.width / 2, y);
            
            c.toBlob(blob => {
              const url = URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = url;
              a.download = `${name.replace(/\s+/g, '_')}.png`;
              a.click();
              URL.revokeObjectURL(url);
              setNotif('‚úÖ Imagen descargada');
              setTimeout(() => setNotif(null), 2000);
            });
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-amber-50 via-green-50 to-amber-100 p-4">
              {notif && <div className="fixed top-4 right-4 bg-green-700 text-white px-6 py-3 rounded-lg shadow-lg z-50">{notif}</div>}
              
              <div className="max-w-7xl mx-auto">
                <header className="text-center mb-8 pt-6">
                  <h1 className="text-5xl font-bold text-green-800 mb-2">Creador de Herencias</h1>
                  <p className="text-green-700 text-lg">Sistema modular de puntos (PH)</p>
                </header>

                <div className="grid lg:grid-cols-3 gap-6">
                  <div className="lg:col-span-2 space-y-6">
                    <div className="bg-white rounded-lg shadow-xl p-6 border-2 border-green-600">
                      <h2 className="text-2xl font-bold text-green-800 mb-4">Informaci√≥n B√°sica</h2>
                      
                      <div className="space-y-4">
                        <div>
                          <label className="block text-green-800 mb-2 font-semibold">Nombre de la Herencia *</label>
                          <input
                            type="text"
                            value={name}
                            onChange={(e) => setName(e.target.value)}
                            placeholder="Ej: Draconidos"
                            className="w-full px-4 py-2 bg-amber-50 text-green-900 rounded border-2 border-green-400 focus:border-green-600 outline-none"
                          />
                        </div>
                        
                        <div>
                          <label className="block text-green-800 mb-2 font-semibold">Naturaleza (Gratuita) *</label>
                          <input
                            type="text"
                            value={nature}
                            onChange={(e) => setNature(e.target.value)}
                            placeholder="Ej: Reptiliano, Resistente"
                            className="w-full px-4 py-2 bg-amber-50 text-green-900 rounded border-2 border-green-400 focus:border-green-600 outline-none"
                          />
                          <p className="text-green-600 text-sm mt-1">La Naturaleza no cuenta en el c√°lculo de PH</p>
                        </div>
                        
                        <div>
                          <label className="block text-green-800 mb-2 font-semibold">Descripci√≥n (Opcional)</label>
                          <textarea
                            value={description}
                            onChange={(e) => setDescription(e.target.value)}
                            placeholder="Describe brevemente esta herencia..."
                            rows="3"
                            className="w-full px-4 py-2 bg-amber-50 text-green-900 rounded border-2 border-green-400 focus:border-green-600 outline-none resize-none"
                          />
                        </div>
                      </div>
                    </div>

                    <div className="bg-white rounded-lg shadow-xl p-6 border-2 border-green-600">
                      <h2 className="text-2xl font-bold text-green-800 mb-4">Biblioteca de Rasgos</h2>
                      
                      <div className="space-y-6">
                        <div>
                          <h3 className="text-xl font-bold text-green-700 mb-3">Ventajas</h3>
                          
                          {Object.entries(traits.ventajas).map(([category, items]) => {
                            const key = `ventaja-${category}`;
                            const isExpanded = expanded[key];
                            const phValue = category === 'mayor' ? '+3' : category === 'medio' ? '+2' : '+1';
                            
                            return (
                              <div key={category} className="mb-3 border-2 border-green-300 rounded-lg overflow-hidden">
                                <button
                                  onClick={() => toggleSection(key)}
                                  className="w-full p-3 bg-green-100 hover:bg-green-200 transition-colors flex justify-between items-center"
                                >
                                  <h4 className="text-lg font-semibold text-green-800 capitalize">
                                    {category} ({phValue} PH) - {items.length} rasgos
                                  </h4>
                                  <span className="text-green-800 text-xl">{isExpanded ? '‚àí' : '+'}</span>
                                </button>
                                
                                {isExpanded && (
                                  <div className="p-3 bg-white space-y-2">
                                    {items.map((trait, idx) => (
                                      <button
                                        key={idx}
                                        onClick={() => addTrait(trait)}
                                        className="w-full text-left p-3 bg-green-50 hover:bg-green-100 rounded border border-green-300 transition-colors"
                                      >
                                        <div className="flex justify-between items-start">
                                          <div className="flex-1">
                                            <div className="font-semibold text-green-800">{trait.name}</div>
                                            <div className="text-sm text-green-700 mt-1">{trait.desc}</div>
                                          </div>
                                          <span className="text-green-600 ml-2 text-xl">+</span>
                                        </div>
                                      </button>
                                    ))}
                                  </div>
                                )}
                              </div>
                            );
                          })}
                        </div>

                        <div>
                          <h3 className="text-xl font-bold text-red-700 mb-3">Desventajas</h3>
                          
                          {Object.entries(traits.desventajas).map(([category, items]) => {
                            const key = `desventaja-${category}`;
                            const isExpanded = expanded[key];
                            const phValue = category === 'mayor' ? '-3' : category === 'medio' ? '-2' : '-1';
                            
                            return (
                              <div key={category} className="mb-3 border-2 border-red-300 rounded-lg overflow-hidden">
                                <button
                                  onClick={() => toggleSection(key)}
                                  className="w-full p-3 bg-red-100 hover:bg-red-200 transition-colors flex justify-between items-center"
                                >
                                  <h4 className="text-lg font-semibold text-red-800 capitalize">
                                    {category} ({phValue} PH) - {items.length} rasgos
                                  </h4>
                                  <span className="text-red-800 text-xl">{isExpanded ? '‚àí' : '+'}</span>
                                </button>
                                
                                {isExpanded && (
                                  <div className="p-3 bg-white space-y-2">
                                    {items.map((trait, idx) => (
                                      <button
                                        key={idx}
                                        onClick={() => addTrait(trait)}
                                        className="w-full text-left p-3 bg-red-50 hover:bg-red-100 rounded border border-red-300 transition-colors"
                                      >
                                        <div className="flex justify-between items-start">
                                          <div className="flex-1">
                                            <div className="font-semibold text-red-800">{trait.name}</div>
                                            <div className="text-sm text-red-700 mt-1">{trait.desc}</div>
                                          </div>
                                          <span className="text-red-600 ml-2 text-xl">+</span>
                                        </div>
                                      </button>
                                    ))}
                                  </div>
                                )}
                              </div>
                            );
                          })}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow-xl p-6 border-2 border-green-600 sticky top-4">
                      <h2 className="text-2xl font-bold text-green-800 mb-4">Tu Herencia</h2>
                      
                      <div className="mb-4 p-4 bg-amber-50 rounded border-2 border-green-400">
                        <div className="text-center">
                          <div className="text-4xl font-bold mb-2" style={{color: total === 0 ? '#15803d' : '#dc2626'}}>
                            {total} PH
                          </div>
                          <div className="text-green-700 text-sm">Balance Total</div>
                        </div>
                        
                        <div className="mt-4 flex justify-around text-center">
                          <div>
                            <div className="text-2xl font-bold text-green-900">{selectedTraits.length}</div>
                            <div className="text-green-600 text-xs">Rasgos</div>
                          </div>
                          <div>
                            <div className="text-2xl font-bold text-green-600">
                              {selectedTraits.filter(t => t.cost > 0).length}
                            </div>
                            <div className="text-green-600 text-xs">Ventajas</div>
                          </div>
                          <div>
                            <div className="text-2xl font-bold text-red-600">
                              {selectedTraits.filter(t => t.cost < 0).length}
                            </div>
                            <div className="text-green-600 text-xs">Desventajas</div>
                          </div>
                        </div>
                      </div>

                      {issues.length > 0 && (
                        <div className="mb-4 p-3 bg-red-100 border-2 border-red-400 rounded">
                          <div className="flex items-start gap-2 mb-2">
                            <span className="text-red-600 mt-1">‚ö†</span>
                            <div>
                              <div className="font-semibold text-red-800">Herencia incompleta:</div>
                              <ul className="text-sm text-red-700 mt-1 space-y-1">
                                {issues.map((issue, i) => (
                                  <li key={i}>‚Ä¢ {issue}</li>
                                ))}
                              </ul>
                            </div>
                          </div>
                        </div>
                      )}

                      {isValid() && (
                        <div className="mb-4 p-3 bg-green-100 border-2 border-green-500 rounded">
                          <div className="flex items-center gap-2">
                            <span className="text-green-700">‚úì</span>
                            <div className="font-semibold text-green-800">Herencia v√°lida</div>
                          </div>
                        </div>
                      )}

                      <div className="space-y-3 mb-4 max-h-96 overflow-y-auto">
                        {selectedTraits.map(trait => (
                          <div key={trait.id} className="p-3 bg-amber-50 rounded border-l-4" style={{borderColor: trait.cost > 0 ? '#15803d' : '#dc2626'}}>
                            <div className="flex justify-between items-start mb-1">
                              <div className="font-semibold text-green-900">{trait.name}</div>
                              <button
                                onClick={() => removeTrait(trait.id)}
                                className="text-red-600 hover:text-red-700 font-bold text-lg"
                              >
                                √ó
                              </button>
                            </div>
                            <div className="text-xs text-green-700">{trait.desc}</div>
                            <div className="text-xs mt-1 font-semibold" style={{color: trait.cost > 0 ? '#15803d' : '#dc2626'}}>
                              {trait.cost > 0 ? '+' : ''}{trait.cost} PH
                            </div>
                          </div>
                        ))}
                      </div>

                      <div className="space-y-2">
                        <button
                          onClick={exportAsText}
                          disabled={!isValid()}
                          className="w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded font-semibold transition-colors flex items-center justify-center gap-2"
                        >
                          <span>üìÑ</span>
                          Exportar como Texto
                        </button>
                        <button
                          onClick={exportAsImage}
                          disabled={!isValid()}
                          className="w-full py-3 bg-green-700 hover:bg-green-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded font-semibold transition-colors flex items-center justify-center gap-2"
                        >
                          <span>üñºÔ∏è</span>
                          Exportar como Imagen
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HeritageCreator />);
    </script>
</body>
</html> pt-6">
                  <h1 className="text-5xl font-bold text-green-800 mb-2">Creador de Herencias</h1>
                  <p className="text-green-700 text-lg">Sistema modular de puntos (PH)</p>
                </header>

                <div className="grid lg:grid-cols-3 gap-6">
                  <div className="lg:col-span-2 space-y-6">
                    <div className="bg-white rounded-lg shadow-xl p-6 border-2 border-green-600">
                      <h2 className="text-2xl font-bold text-green-800 mb-4">Informaci√≥n B√°sica</h2>
                      <div className="space-y-4">
                        <div>
                          <label className="block text-green-800 mb-2 font-semibold">Nombre *</label>
                          <input type="text" value={name} onChange={e => setName(e.target.value)} placeholder="Ej: Draconidos" className="w-full px-4 py-2 bg-amber-50 text-green-900 rounded border-2 border-green-400 focus:border-green-600 outline-none" />
                        </div>
                        <div>
                          <label className="block text-green-800 mb-2 font-semibold">Naturaleza *</label>
                          <input type="text" value={nature} onChange={e => setNature(e.target.value)} placeholder="Ej: Reptiliano" className="w-full px-4 py-2 bg-amber-50 text-green-900 rounded border-2 border-green-400 focus:border-green-600 outline-none" />
                        </div>
                        <div>
                          <label className="block text-green-800 mb-2 font-semibold">Descripci√≥n</label>
                          <textarea value={desc} onChange={e => setDesc(e.target.value)} placeholder="Describe..." rows="3" className="w-full px-4 py-2 bg-amber-50 text-green-900 rounded border-2 border-green-400 focus:border-green-600 outline-none resize-none" />
                        </div>
                      </div>
                    </div>

                    <div className="bg-white rounded-lg shadow-xl p-6 border-2 border-green-600">
                      <h2 className="text-2xl font-bold text-green-800 mb-4">Biblioteca de Rasgos</h2>
                      
                      <div className="space-y-6">
                        <div>
                          <h3 className="text-xl font-bold text-green-700 mb-3">Ventajas</h3>
                          {Object.entries(data.v).map(([cat, items]) => {
                            const k = `v-${cat}`;
                            const isExp = exp[k];
                            const ph = cat === 'mayor' ? '+3' : cat === 'medio' ? '+2' : '+1';
                            return (
                              <div key={cat} className="mb-3 border-2 border-green-300 rounded-lg overflow-hidden">
                                <button onClick={() => setExp({...exp, [k]: !isExp})} className="w-full p-3 bg-green-100 hover:bg-green-200 flex justify-between items-center">
                                  <span className="text-lg font-semibold text-green-800 capitalize">{cat} ({ph} PH) - {items.length} rasgos</span>
                                  <span className="text-green-800 text-xl">{isExp ? '‚àí' : '+'}</span>
                                </button>
                                {isExp && (
                                  <div className="p-3 bg-white space-y-2">
                                    {items.map((t, i) => (
                                      <button key={i} onClick={() => add(t)} className="w-full text-left p-3 bg-green-50 hover:bg-green-100 rounded border border-green-300">
                                        <div className="flex justify-between items-start">
                                          <div className="flex-1">
                                            <div className="font-semibold text-green-800">Herencia v√°lida</div>
                          </div>
                        </div>
                      )}

                      <div className="space-y-3 mb-4 max-h-96 overflow-y-auto">
                        {traits.map(t => (
                          <div key={t.id} className="p-3 bg-amber-50 rounded border-l-4" style={{borderColor: t.c > 0 ? '#15803d' : '#dc2626'}}>
                            <div className="flex justify-between items-start mb-1">
                              <div className="font-semibold text-green-900">{t.n}</div>
                              <button onClick={() => del(t.id)} className="text-red-600 hover:text-red-700 font-bold text-lg">√ó</button>
                            </div>
                            <div className="text-xs text-green-700">{t.d}</div>
                            <div className="text-xs mt-1 font-semibold" style={{color: t.c > 0 ? '#15803d' : '#dc2626'}}>{t.c > 0 ? '+' : ''}{t.c} PH</div>
                          </div>
                        ))}
                      </div>

                      <div className="space-y-2">
                        <button onClick={expTxt} disabled={!valid} className="w-full py-3 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded font-semibold transition-colors flex items-center justify-center gap-2">
                          <span>üìÑ</span>
                          Exportar como Texto
                        </button>
                        <button onClick={expImg} disabled={!valid} className="w-full py-3 bg-green-700 hover:bg-green-800 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded font-semibold transition-colors flex items-center justify-center gap-2">
                          <span>üñºÔ∏è</span>
                          Exportar como Imagen
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>semibold text-green-800">{t.n}</div>
                                            <div className="text-sm text-green-700 mt-1">{t.d}</div>
                                          </div>
                                          <span className="text-green-600 ml-2 text-xl">+</span>
                                        </div>
                                      </button>
                                    ))}
                                  </div>
                                )}
                              </div>
                            );
                          })}
                        </div>

                        <div>
                          <h3 className="text-xl font-bold text-red-700 mb-3">Desventajas</h3>
                          {Object.entries(data.d).map(([cat, items]) => {
                            const k = `d-${cat}`;
                            const isExp = exp[k];
                            const ph = cat === 'mayor' ? '-3' : cat === 'medio' ? '-2' : '-1';
                            return (
                              <div key={cat} className="mb-3 border-2 border-red-300 rounded-lg overflow-hidden">
                                <button onClick={() => setExp({...exp, [k]: !isExp})} className="w-full p-3 bg-red-100 hover:bg-red-200 flex justify-between items-center">
                                  <span className="text-lg font-semibold text-red-800 capitalize">{cat} ({ph} PH) - {items.length} rasgos</span>
                                  <span className="text-red-800 text-xl">{isExp ? '‚àí' : '+'}</span>
                                </button>
                                {isExp && (
                                  <div className="p-3 bg-white space-y-2">
                                    {items.map((t, i) => (
                                      <button key={i} onClick={() => add(t)} className="w-full text-left p-3 bg-red-50 hover:bg-red-100 rounded border border-red-300">
                                        <div className="flex justify-between items-start">
                                          <div className="flex-1">
                                            <div className="font-semibold text-red-800">{t.n}</div>
                                            <div className="text-sm text-red-700 mt-1">{t.d}</div>
                                          </div>
                                          <span className="text-red-600 ml-2 text-xl">+</span>
                                        </div>
                                      </button>
                                    ))}
                                  </div>
                                )}
                              </div>
                            );
                          })}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow-xl p-6 border-2 border-green-600 sticky top-4">
                      <h2 className="text-2xl font-bold text-green-800 mb-4">Tu Herencia</h2>
                      
                      <div className="mb-4 p-4 bg-amber-50 rounded border-2 border-green-400">
                        <div className="text-center">
                          <div className="text-4xl font-bold mb-2" style={{color: tot === 0 ? '#15803d' : '#dc2626'}}>{tot} PH</div>
                          <div className="text-green-700 text-sm">Balance Total</div>
                        </div>
                        <div className="mt-4 flex justify-around text-center">
                          <div>
                            <div className="text-2xl font-bold text-green-900">{traits.length}</div>
                            <div className="text-green-600 text-xs">Rasgos</div>
                          </div>
                          <div>
                            <div className="text-2xl font-bold text-green-600">{traits.filter(t => t.c > 0).length}</div>
                            <div className="text-green-600 text-xs">Ventajas</div>
                          </div>
                          <div>
                            <div className="text-2xl font-bold text-red-600">{traits.filter(t => t.c < 0).length}</div>
                            <div className="text-green-600 text-xs">Desventajas</div>
                          </div>
                        </div>
                      </div>

                      {issues.length > 0 && (
                        <div className="mb-4 p-3 bg-red-100 border-2 border-red-400 rounded">
                          <div className="flex items-start gap-2">
                            <span className="text-red-600 mt-1">‚ö†</span>
                            <div>
                              <div className="font-semibold text-red-800">Incompleta:</div>
                              <ul className="text-sm text-red-700 mt-1 space-y-1">
                                {issues.map((issue, i) => <li key={i}>‚Ä¢ {issue}</li>)}
                              </ul>
                            </div>
                          </div>
                        </div>
                      )}

                      {valid && (
                        <div className="mb-4 p-3 bg-green-100 border-2 border-green-500 rounded">
                          <div className="flex items-center gap-2">
                            <span className="text-green-700">‚úì</span>
                            <div className="font-
